(this["webpackJsonpnotehub-ui"]=this["webpackJsonpnotehub-ui"]||[]).push([[0],{109:function(e,t,a){},110:function(e,t,a){},112:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(21),r=a.n(s),o=(a(75),a(12)),i=c.a.createContext(null),l=a(23),j=a(8),u=(a(76),a(77),a(78),a(31)),d=a(32),b=(a(79),a(120)),h=a(121),O=a(119),m=a(117),x=a(118),p=a(68),f=a(48),g=a(122),v=a(19),S=a(25),N=a.n(S),k=a(2);var C=function(){var e=Object(n.useContext)(i),t="https://notehubapi.kod.fun",a=e.token,c=Object(n.useState)([]),s=Object(o.a)(c,2),r=s[0],j=s[1],S={id:0,title:"",content:"",createdTime:"",modifiedTime:""},C=Object(n.useState)(Object(d.a)({},S)),w=Object(o.a)(C,2),y=w[0],I=w[1];return Object(n.useEffect)((function(){N.a.get(t+"/api/Notes",{headers:{Authorization:"Bearer "+a}}).then((function(e){j(e.data)})).catch((function(e){console.log(e)}))}),[]),Object(k.jsxs)("div",{className:"home-wrapper",children:[Object(k.jsxs)(b.a,{bg:"light",expand:"lg",children:[Object(k.jsx)(b.a.Brand,{href:"#home",children:"NoteHub"}),Object(k.jsx)(b.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(k.jsxs)(b.a.Collapse,{id:"basic-navbar-nav",children:[Object(k.jsx)(h.a,{className:"mr-auto",children:Object(k.jsx)(h.a.Link,{href:"#home",children:"Home"})}),Object(k.jsx)(h.a,{children:Object(k.jsx)(O.a,{alignRight:!0,title:"My Account",id:"basic-nav-dropdown",children:Object(k.jsxs)(l.b,{className:"dropdown-item",to:"/logout",children:["Logout (",e.username,")"]})})})]})]}),Object(k.jsx)(m.a,{fluid:!0,className:"flex-fill",children:Object(k.jsxs)(x.a,{className:"h-100",children:[Object(k.jsxs)(p.a,{sm:4,md:3,children:[Object(k.jsxs)("h3",{className:"mt-4 d-flex",children:["My Notes",Object(k.jsx)(f.a,{variant:"success",className:"ml-auto",onClick:function(e){e.preventDefault(),N.a.post(t+"/api/Notes",{title:"New Note",content:""},{headers:{Authorization:"Bearer "+a}}).then((function(e){var t=e.data;j([].concat(Object(u.a)(r),[t]))})).catch((function(e){console.log(e)}))},children:Object(k.jsx)("i",{className:"fas fa-plus"})})]}),Object(k.jsx)(g.a,{activeKey:"#notes-"+y.id,children:r.map((function(e,t){return Object(k.jsx)(g.a.Item,{action:!0,href:"#notes-"+e.id,onClick:function(t){return function(e,t){e.preventDefault(),I(t)}(t,e)},children:e.title},e.id)}))})]}),Object(k.jsx)(p.a,{className:"h-100",sm:8,md:9,children:0==y.id?Object(k.jsx)(v.a,{}):Object(k.jsxs)(v.a,{className:"py-3 h-100 d-flex flex-column",children:[Object(k.jsx)(v.a.Group,{children:Object(k.jsx)(v.a.Control,{type:"text",placeholder:"Title",value:y.title,onChange:function(e){return I(Object(d.a)(Object(d.a)({},y),{},{title:e.target.value}))}})}),Object(k.jsx)(v.a.Group,{className:"flex-fill",children:Object(k.jsx)(v.a.Control,{className:"h-100",as:"textarea",rows:10,placeholder:"Content",value:y.content,onChange:function(e){return I(Object(d.a)(Object(d.a)({},y),{},{content:e.target.value}))}})}),Object(k.jsxs)("div",{children:[Object(k.jsx)(f.a,{variant:"primary",onClick:function(e){e.preventDefault(),N.a.put(t+"/api/Notes/"+y.id,{id:y.id,title:y.title,content:y.content},{headers:{Authorization:"Bearer "+a}}).then((function(e){var t=Object(u.a)(r),a=t.find((function(e){return e.id==y.id}));a.title=y.title,a.content=y.content,j(t)})).catch((function(e){console.log(e)}))},children:"Save"}),Object(k.jsx)(f.a,{variant:"danger",className:"ml-2",onClick:function(e){e.preventDefault(),N.a.delete(t+"/api/Notes/"+y.id,{headers:{Authorization:"Bearer "+a}}).then((function(e){var t=r.filter((function(e){return e.id!=y.id}));j(t),I(Object(d.a)({},S))})).catch((function(e){console.log(e)}))},children:"Delete"})]})]})})]})})]})},w=(a(109),a(34)),y=a(56),I=a(69);var L=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),r=Object(o.a)(s,2),i=r[0],j=r[1],d=Object(n.useState)(""),b=Object(o.a)(d,2),h=b[0],O=b[1],m=Object(n.useState)([]),x=Object(o.a)(m,2),p=x[0],g=x[1];return Object(k.jsx)(y.a,{className:"card-register",children:Object(k.jsxs)(y.a.Body,{className:"p-sm-4",children:[Object(k.jsx)(w.a,{}),Object(k.jsx)("h1",{className:"text-center",children:"Register"}),Object(k.jsx)(I.a,{variant:"danger",className:0==p.length?"d-none":"",children:p.join(" ")}),Object(k.jsxs)(v.a,{onSubmit:function(e){g([]),e.preventDefault(),N.a.post("https://notehubapi.kod.fun/api/Account/Register",{email:a,password:i,confirmPassword:h}).then((function(e){c(""),j(""),O(""),w.b.success("Account creation is successful. Now you can login and start using the app!")})).catch((function(e){if(e.response){if(e.response.data&&e.response.data.errors){var t=[];for(var a in e.response.data.errors)t.push.apply(t,Object(u.a)(e.response.data.errors[a]));g(t)}}else g(["Cannot connect to server. Please try again later."])}))},children:[Object(k.jsxs)(v.a.Group,{controlId:"formBasicEmail",children:[Object(k.jsx)(v.a.Label,{children:"Email address"}),Object(k.jsx)(v.a.Control,{type:"email",placeholder:"Enter email",required:!0,value:a,onChange:function(e){return c(e.target.value)}})]}),Object(k.jsxs)(v.a.Group,{controlId:"formBasicPassword",children:[Object(k.jsx)(v.a.Label,{children:"Password"}),Object(k.jsx)(v.a.Control,{type:"password",placeholder:"Password",required:!0,value:i,onChange:function(e){return j(e.target.value)}})]}),Object(k.jsxs)(v.a.Group,{controlId:"formConfirmPassword",children:[Object(k.jsx)(v.a.Label,{children:"Confirm Password"}),Object(k.jsx)(v.a.Control,{type:"password",placeholder:"Password",required:!0,value:h,onChange:function(e){return O(e.target.value)}})]}),Object(k.jsxs)(f.a,{variant:"primary",type:"submit",children:["Submit ",a," ",i," ",h]})]}),Object(k.jsx)("div",{className:"text-center mt-3",children:Object(k.jsx)(l.b,{to:"/login",children:"Login with your existing user account"})})]})})};a(110),a(111);var P=function(){var e=Object(j.g)(),t=Object(n.useContext)(i),a=new URLSearchParams(Object(j.h)().search).get("logout");Object(n.useEffect)((function(){"success"==a&&Object(w.b)("You have logged out succesfully!")}),[a]);var c=Object(n.useState)(""),s=Object(o.a)(c,2),r=s[0],d=s[1],b=Object(n.useState)(""),h=Object(o.a)(b,2),O=h[0],m=h[1],x=Object(n.useState)(!0),p=Object(o.a)(x,2),g=p[0],S=p[1],C=Object(n.useState)([]),L=Object(o.a)(C,2),P=L[0],B=L[1];return Object(k.jsx)(y.a,{className:"card-login",children:Object(k.jsxs)(y.a.Body,{className:"p-sm-4",children:[Object(k.jsx)(w.a,{}),Object(k.jsx)("h1",{className:"text-center",children:"Login"}),Object(k.jsx)(I.a,{variant:"danger",className:0==P.length?"d-none":"",children:P.join(" ")}),Object(k.jsxs)(v.a,{onSubmit:function(a){B([]),a.preventDefault(),N.a.post("https://notehubapi.kod.fun/api/Account/Login",{username:r,password:O}).then((function(a){g?(localStorage.username=r,localStorage.token=a.data.token,sessionStorage.removeItem("username"),sessionStorage.removeItem("token")):(sessionStorage.username=r,sessionStorage.token=a.data.token,localStorage.removeItem("username"),localStorage.removeItem("token")),t.setUsername(r),t.setToken(a.data.token),t.setIsLoggedIn(!0),e.push("/")})).catch((function(e){if(e.response){if(e.response.data&&e.response.data.errors){var t=[];for(var a in e.response.data.errors)t.push.apply(t,Object(u.a)(e.response.data.errors[a]));B(t)}}else B(["Cannot connect to server. Please try again later."])}))},children:[Object(k.jsxs)(v.a.Group,{controlId:"formBasicEmail",children:[Object(k.jsx)(v.a.Label,{children:"Email address"}),Object(k.jsx)(v.a.Control,{type:"email",placeholder:"Enter email",value:r,onInput:function(e){return d(e.target.value)},required:!0})]}),Object(k.jsxs)(v.a.Group,{controlId:"formBasicPassword",children:[Object(k.jsx)(v.a.Label,{children:"Password"}),Object(k.jsx)(v.a.Control,{type:"password",placeholder:"Password",value:O,onInput:function(e){return m(e.target.value)},required:!0})]}),Object(k.jsx)(v.a.Group,{controlId:"formBasicCheckbox",children:Object(k.jsx)(v.a.Check,{type:"checkbox",label:"Remember me",checked:g,onChange:function(e){return S(e.target.checked)}})}),Object(k.jsx)(f.a,{variant:"primary",type:"submit",children:"Submit"})]}),Object(k.jsx)("div",{className:"text-center mt-3",children:Object(k.jsx)(l.b,{to:"/register",children:"Register as a new user"})})]})})};var B=function(){var e=Object(n.useContext)(i);return localStorage.removeItem("token"),localStorage.removeItem("username"),sessionStorage.removeItem("token"),sessionStorage.removeItem("username"),Object(n.useEffect)((function(){e.setIsLoggedIn(!1),e.setToken(null)})),Object(k.jsx)(j.a,{to:"/login?logout=success"})};var E=function(){var e=sessionStorage.token||localStorage.token||null,t=Object(n.useState)(null!=e),a=Object(o.a)(t,2),c=a[0],s=a[1],r=Object(n.useState)(e),u=Object(o.a)(r,2),d=u[0],b=u[1],h=Object(n.useState)(sessionStorage.username||localStorage.username||null),O=Object(o.a)(h,2),m=O[0],x=O[1];return Object(k.jsx)(i.Provider,{value:{token:d,setToken:b,isLoggedIn:c,setIsLoggedIn:s,username:m,setUsername:x},children:Object(k.jsx)(l.a,{basename:"/NoteHub",children:Object(k.jsxs)(j.d,{children:[Object(k.jsx)(j.b,{path:"/register",children:Object(k.jsx)(L,{})}),Object(k.jsx)(j.b,{path:"/login",children:Object(k.jsx)(P,{})}),Object(k.jsx)(j.b,{path:"/logout",children:Object(k.jsx)(B,{})}),Object(k.jsx)(j.b,{path:"/",children:c?Object(k.jsx)(C,{}):Object(k.jsx)(j.a,{to:"/login"})})]})})})};r.a.render(Object(k.jsx)(c.a.StrictMode,{children:Object(k.jsx)(E,{})}),document.getElementById("root"))},75:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){}},[[112,1,2]]]);
//# sourceMappingURL=main.ea416a21.chunk.js.map